{"kind":"article","metadata":{"role":"article","title":"Inspecting JSON with SessionDebuggable","roleHeading":"Article","modules":[{"name":"ATProtoKit"}]},"hierarchy":{"paths":[["doc:\/\/ATProtoKit\/documentation\/ATProtoKit"]]},"primaryContentSections":[{"content":[{"text":"Overview","type":"heading","anchor":"Overview","level":2},{"inlineContent":[{"type":"text","text":"When building apps that communicate over HTTP, bugs often arise when the JSON sent or received doesn’t match what your code expects. Debugging these issues is much easier when you can inspect the "},{"inlineContent":[{"type":"text","text":"actual"}],"type":"emphasis"},{"type":"text","text":" request and response payloads, headers, and endpoints."}],"type":"paragraph"},{"inlineContent":[{"text":"For this reason, ATProtoKit introduces a flexible debugging protocol: ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionDebuggable"},{"type":"text","text":"."}],"type":"paragraph"},{"inlineContent":[{"type":"codeVoice","code":"SessionDebuggable"},{"text":" is a simple protocol that lets you inspect every outgoing request and incoming response—including JSON payloads, headers, and URLs. By plugging in your own implementation, you control ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"how"}]},{"text":" and ","type":"text"},{"inlineContent":[{"text":"where","type":"text"}],"type":"emphasis"},{"text":" this information is displayed or captured.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here’s the protocol definition:"}]},{"code":["public protocol SessionDebuggable: Sendable {","    \/\/ Called before a request is sent.","    func logRequest(_ request: URLRequest, body: Data?)","","    \/\/ Called after a response is received.","    func logResponse(_ response: URLResponse?, data: Data?, error: Error?)","}"],"syntax":"swift","type":"codeListing"},{"items":[{"content":[{"inlineContent":[{"type":"reference","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionDebuggable\/logRequest(_:body:)","isActive":true},{"text":" displays information about the outgoing request.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionDebuggable\/logResponse(_:data:error:)"},{"type":"text","text":" displays details about the received response, including errors (if any)."}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"type":"heading","anchor":"Using-the-Built-in-ConsoleDebugger","text":"Using the Built-in ConsoleDebugger"},{"type":"paragraph","inlineContent":[{"text":"ATProtoKit provides a default implementation called ","type":"text"},{"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ConsoleDebugger","isActive":true,"type":"reference"},{"type":"text","text":". It prints request and response details to the console, including:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Request URL and method;"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Headers;","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"JSON body (if present); and","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Response status code, headers, and body."}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To enable it, add this line before making network requests:"}]},{"syntax":"swift","type":"codeListing","code":["let apiClientConfiguration = APIClientConfiguration(logger: ConsoleDebugger())","let atProtoKit = ATProtoKit(","    sessionConfiguration: config,","    apiClientConfiguration: apiClientConfiguration",")"]},{"style":"tip","name":"Tip","content":[{"inlineContent":[{"text":"If you do nothing, debugging is disabled by default (","type":"text"},{"type":"codeVoice","code":"nil"},{"text":"), so there’s no runtime overhead in production.","type":"text"}],"type":"paragraph"}],"type":"aside"},{"type":"aside","style":"note","name":"Note","content":[{"type":"paragraph","inlineContent":[{"text":"All debugging via ","type":"text"},{"code":"SessionDebuggable","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"ConsoleDebugger","type":"codeVoice"},{"type":"text","text":" runs only in debug mode."}]}]},{"text":"Implementing Your Own Debugger","anchor":"Implementing-Your-Own-Debugger","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"You aren’t limited to printing to the console. You can log to a file, upload logs for analysis, or even display them in your app’s debug UI. Just conform to the "},{"type":"codeVoice","code":"SessionDebuggable"},{"text":" protocol:","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["public struct FileDebugger: SessionDebuggable {","    public func logRequest(_ request: URLRequest, body: Data?) {","        \/\/ Write request details to a file...","    }","","    public func logResponse(_ response: URLResponse?, data: Data?, error: Error?) {","        \/\/ Write response details to a file...","    }","}"]},{"type":"paragraph","inlineContent":[{"text":"Then, enable your custom debugger:","type":"text"}]},{"code":["let apiClientConfiguration = APIClientConfiguration(logger: FileDebugger())","let atProtoKit = ATProtoKit(","    sessionConfiguration: config,","    apiClientConfiguration: apiClientConfiguration",")"],"type":"codeListing","syntax":"swift"}],"kind":"content"}],"schemaVersion":{"patch":0,"minor":3,"major":0},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/atprotokit\/sessiondebuggablearticle"]}],"identifier":{"url":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionDebuggableArticle","interfaceLanguage":"swift"},"seeAlsoSections":[{"generated":true,"title":"APIClientService","identifiers":["doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/APIClientService","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/APIClientConfiguration","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATRequestExecutor","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionDebuggable","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ConsoleDebugger"]}],"sections":[],"abstract":[{"type":"text","text":"Learn how to inspect JSON objects in your requests and responses."}],"references":{"doc://ATProtoKit/documentation/ATProtoKit/ConsoleDebugger":{"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ConsoleDebugger","kind":"identifier"}],"role":"symbol","navigatorTitle":[{"kind":"identifier","text":"ConsoleDebugger"}],"title":"ConsoleDebugger","kind":"symbol","url":"\/documentation\/atprotokit\/consoledebugger","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ConsoleDebugger","abstract":[{"text":"A default implementation of the ","type":"text"},{"type":"codeVoice","code":"SessionDebuggable"},{"type":"text","text":" protocol that logs requests and responses to"},{"type":"text","text":" "},{"type":"text","text":"the console."}],"type":"topic"},"doc://ATProtoKit/documentation/ATProtoKit/SessionDebuggable":{"url":"\/documentation\/atprotokit\/sessiondebuggable","navigatorTitle":[{"kind":"identifier","text":"SessionDebuggable"}],"kind":"symbol","title":"SessionDebuggable","fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"text":"SessionDebuggable","kind":"identifier"}],"abstract":[{"type":"text","text":"A protocol for debugging and inspecting HTTP requests and responses within a network session."}],"type":"topic","role":"symbol","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionDebuggable"},"doc://ATProtoKit/documentation/ATProtoKit/SessionDebuggable/logRequest(_:body:)":{"url":"\/documentation\/atprotokit\/sessiondebuggable\/logrequest(_:body:)","kind":"symbol","title":"logRequest(_:body:)","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"logRequest","kind":"identifier"},{"kind":"text","text":"("},{"text":"URLRequest","kind":"typeIdentifier","preciseIdentifier":"s:10Foundation10URLRequestV"},{"text":", ","kind":"text"},{"text":"body","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Data","preciseIdentifier":"s:10Foundation4DataV","kind":"typeIdentifier"},{"kind":"text","text":"?)"}],"abstract":[{"type":"text","text":"Creates a log immediately before an HTTP request is sent."}],"type":"topic","role":"symbol","required":true,"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionDebuggable\/logRequest(_:body:)"},"doc://ATProtoKit/documentation/ATProtoKit/SessionDebuggable/logResponse(_:data:error:)":{"url":"\/documentation\/atprotokit\/sessiondebuggable\/logresponse(_:data:error:)","kind":"symbol","title":"logResponse(_:data:error:)","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"logResponse","kind":"identifier"},{"text":"(","kind":"text"},{"text":"URLResponse","preciseIdentifier":"c:objc(cs)NSURLResponse","kind":"typeIdentifier"},{"text":"?, ","kind":"text"},{"kind":"externalParam","text":"data"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:10Foundation4DataV","kind":"typeIdentifier","text":"Data"},{"text":"?, ","kind":"text"},{"text":"error","kind":"externalParam"},{"kind":"text","text":": (any "},{"text":"Error","kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP"},{"text":")?)","kind":"text"}],"abstract":[{"type":"text","text":"Creates a log immediately after a response is received (or a request fails)."}],"type":"topic","role":"symbol","required":true,"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionDebuggable\/logResponse(_:data:error:)"},"doc://ATProtoKit/documentation/ATProtoKit/APIClientConfiguration":{"url":"\/documentation\/atprotokit\/apiclientconfiguration","title":"APIClientConfiguration","abstract":[{"text":"A configuration container for customizing the behavior of an API client.","type":"text"}],"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/APIClientConfiguration","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"APIClientConfiguration"}],"role":"symbol","navigatorTitle":[{"text":"APIClientConfiguration","kind":"identifier"}],"kind":"symbol"},"doc://ATProtoKit/documentation/ATProtoKit":{"images":[{"type":"icon","identifier":"atprotokit_icon.png"}],"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit","type":"topic","url":"\/documentation\/atprotokit","role":"collection","kind":"symbol","abstract":[{"text":"Develop and manage client and server-side applications for the AT Protocol and Bluesky.","type":"text"}],"title":"ATProtoKit"},"doc://ATProtoKit/documentation/ATProtoKit/ATRequestExecutor":{"url":"\/documentation\/atprotokit\/atrequestexecutor","navigatorTitle":[{"text":"ATRequestExecutor","kind":"identifier"}],"kind":"symbol","title":"ATRequestExecutor","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ATRequestExecutor"}],"abstract":[{"type":"text","text":"An abstraction for executing network requests and returning raw data and response metadata."}],"type":"topic","role":"symbol","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATRequestExecutor"},"atprotokit_icon.png":{"alt":"A technology icon representing the ATProtoKit framework.","identifier":"atprotokit_icon.png","type":"image","variants":[{"url":"\/images\/atprotokit_icon.png","traits":["1x","light"]}]},"doc://ATProtoKit/documentation/ATProtoKit/APIClientService":{"abstract":[{"text":"A struct which handle the most common HTTP requests for the AT Protocol.","type":"text"}],"role":"symbol","url":"\/documentation\/atprotokit\/apiclientservice","title":"APIClientService","type":"topic","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/APIClientService","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"APIClientService"}],"navigatorTitle":[{"kind":"identifier","text":"APIClientService"}],"kind":"symbol"}}}