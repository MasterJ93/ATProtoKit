{"kind":"article","hierarchy":{"paths":[["doc:\/\/ATProtoKit\/documentation\/ATProtoKit"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/atprotokit\/sessionconfigurationarticle"]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfigurationArticle"},"sections":[],"abstract":[{"text":"Discover how to utilize ","type":"text"},{"code":"SessionConfiguration","type":"codeVoice"},{"text":" to better fit your use case.","type":"text"}],"schemaVersion":{"patch":0,"major":0,"minor":3},"metadata":{"role":"article","modules":[{"name":"ATProtoKit"}],"title":"Implementing SessionConfiguration","roleHeading":"Article"},"seeAlsoSections":[{"identifiers":["doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATProtocolConfiguration","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATProtoKitConfiguration","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/UserSessionRegistry","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/UserSession","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SecureKeychainProtocol","doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/AppleSecureKeychain"],"title":"Authentication and Session Management","generated":true}],"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Overview","level":2,"anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration","isActive":true},{"type":"text","text":" is a simple but powerful tool for managing sessions. While "},{"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATProtocolConfiguration","type":"reference","isActive":true},{"text":" is useful for most uses, there may be situations where it might fall short.","type":"text"}]},{"inlineContent":[{"text":"In this article, you’ll learn how to implement custom instances for some specific use cases.","type":"text"}],"type":"paragraph"},{"type":"heading","level":2,"text":"The Role and Structure of SessionConfiguration","anchor":"The-Role-and-Structure-of-SessionConfiguration"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This "},{"type":"codeVoice","code":"protocol"},{"type":"text","text":" requires a few methods and properties. They relate to:"}]},{"items":[{"content":[{"inlineContent":[{"text":"Creating and managing sessions.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Creating instances of "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/UserSession"},{"type":"text","text":"."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Managing the keychain.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Providing pauses in order to handle additional user input."}]}]}],"type":"unorderedList"},{"style":"note","name":"Note","content":[{"inlineContent":[{"type":"text","text":""},{"type":"codeVoice","code":"SessionConfiguration"},{"type":"text","text":" requires that your "},{"code":"class","type":"codeVoice"},{"text":" is marked as ","type":"text"},{"code":"final","type":"codeVoice"},{"type":"text","text":" and it conforms to "},{"type":"codeVoice","code":"Sendable"},{"type":"text","text":"."}],"type":"paragraph"}],"type":"aside"},{"inlineContent":[{"text":"To help with this, there’s two objects that work alongside it:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/UserSessionRegistry","type":"reference"},{"type":"text","text":", which stores all instances of "},{"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/UserSession","isActive":true,"type":"reference"},{"text":".","type":"text"}]}]},{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SecureKeychainProtocol"},{"type":"text","text":", which stores the session tokens and password."}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"Specifically with "},{"type":"codeVoice","code":"SecureKeychainProtocol"},{"text":", Apple platforms has a default ","type":"text"},{"code":"actor","type":"codeVoice"},{"type":"text","text":" that conforms to the "},{"code":"protocol","type":"codeVoice"},{"text":": ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/AppleSecureKeychain"},{"type":"text","text":"."}],"type":"paragraph"},{"style":"note","name":"Note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Linux and Windows users lack a default implementation for now. This may change in future updates."}]}],"type":"aside"},{"inlineContent":[{"type":"codeVoice","code":"SessionConfiguration"},{"text":" also contains default implementations on all of the methods. Namely:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/createAccount(email:handle:existingDID:inviteCode:verificationCode:verificationPhone:password:recoveryKey:plcOperation:)-4i1g4"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/authenticate(with:password:)-272a8","isActive":true}]}]},{"content":[{"inlineContent":[{"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/getSession()-3wx11","type":"reference","isActive":true}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/refreshSession()-bd61","isActive":true,"type":"reference"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/deleteSession()-a8d","isActive":true,"type":"reference"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"With these implementations, you don’t have to start from scratch: if there’s a method that already works for your needs, but some others requires a custom implementation, then you’re free to ignore it.","type":"text"}]},{"inlineContent":[{"type":"text","text":"Finally, there are properties that provide pausing opportunities so that the user can perform actions outside of the app, such as getting a Two-Factor Authentication code, or waiting for the server to state that the user has completed the OAuth requirements. These are "},{"type":"codeVoice","code":"AsyncStream"},{"type":"text","text":" properties, named "},{"isActive":true,"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/codeStream","type":"reference"},{"text":" and ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/codeContinuation"},{"text":".","type":"text"}],"type":"paragraph"},{"anchor":"Use-Cases","text":"Use Cases","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"There are some use cases that ATProtoKit doesn’t include right out of the box at this time. This section will cover those use cases, as well as how to implement them."}]},{"anchor":"Resolving-PDS-Links","level":3,"type":"heading","text":"Resolving PDS Links"},{"inlineContent":[{"text":"ATProtoKit typically retrieves the service endpoint from the Personal Data Server (PDS) once the authentication process is complete. However, you’ll ideally want to retrieve that link before you authenticate. If you wish to do this, you can add this to the authentication process.","type":"text"}],"type":"paragraph"},{"type":"aside","content":[{"inlineContent":[{"type":"text","text":"In this example, we’ll be using "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/mattmassicotte\/ATResolve"},{"type":"text","text":", which is perfect for what we need."}],"type":"paragraph"}],"name":"Note","style":"note"},{"inlineContent":[{"type":"text","text":"Once you add the package as a dependency and you create a new "},{"type":"codeVoice","code":"class"},{"text":", Override the ","type":"text"},{"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/authenticate(with:password:)-272a8","isActive":true,"type":"reference"},{"text":" method to implement the following:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["public func MySessionConfigurationClass: SessionConfiguration {","","    \/\/ Properties and initializer implemented above...","","    public func authenticate(with handle: String, password: String) async throws {","        let serviceEndpoint: URL","","        do {","            \/\/ Resolve the handle to make sure it exists.","            let resolver = ATResolver()","            let resolvedHandle = try await resolver.resolveHandle(handle)","","            guard let serviceEndpointString = resolvedHandle?.serviceEndpoint,","                  let serviceEndpointURL = URL(string: serviceEndpointString) else {","                    throw DIDDocument.DIDDocumentError.noATProtoPDSValue","            }","","            serviceEndpoint = serviceEndpointURL","        } catch {","            throw error","        }","    }","}"],"type":"codeListing"},{"inlineContent":[{"text":"In the above example, we create an instance of ","type":"text"},{"code":"ATResolve","type":"codeVoice"},{"text":". After that, we use ","type":"text"},{"type":"codeVoice","code":"resolveHandle()"},{"type":"text","text":" and pass in the "},{"type":"codeVoice","code":"handle"},{"type":"text","text":" property as the argument. "},{"code":"ATResolve","type":"codeVoice"},{"type":"text","text":" will find the DID document associated with the handle, which will contain the service endpoint. Once you’re done, all that’s left to do is extract the URL."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can now use this to pass the "},{"code":"serviceEndpoint","type":"codeVoice"},{"text":" variable into the ","type":"text"},{"type":"codeVoice","code":"pdsURL"},{"type":"text","text":" parameter of "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATProtocolConfiguration\/init(pdsURL:keychainProtocol:configuration:canResolve:)"},{"text":", and then call the ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATProtoKit\/createSession(with:and:authenticationFactorToken:)"},{"text":" method.","type":"text"}]}]}],"references":{"doc://ATProtoKit/documentation/ATProtoKit/ATProtoKit/createSession(with:and:authenticationFactorToken:)":{"kind":"symbol","abstract":[{"type":"text","text":"Creates a session for the user account."}],"type":"topic","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"createSession","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"with"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":", "},{"text":"and","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"authenticationFactorToken"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"text":"?) ","kind":"text"},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"text":"throws","kind":"keyword"},{"kind":"text","text":" -> "},{"preciseIdentifier":"s:10ATProtoKit17ComAtprotoLexiconV","kind":"typeIdentifier","text":"ComAtprotoLexicon"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Server","preciseIdentifier":"s:10ATProtoKit17ComAtprotoLexiconV6ServerV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"CreateSessionOutput","preciseIdentifier":"s:10ATProtoKit17ComAtprotoLexiconV6ServerV19CreateSessionOutputV"}],"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATProtoKit\/createSession(with:and:authenticationFactorToken:)","role":"symbol","url":"\/documentation\/atprotokit\/atprotokit\/createsession(with:and:authenticationfactortoken:)","title":"createSession(with:and:authenticationFactorToken:)"},"doc://ATProtoKit/documentation/ATProtoKit/SessionConfiguration/refreshSession()-bd61":{"kind":"symbol","url":"\/documentation\/atprotokit\/sessionconfiguration\/refreshsession()-bd61","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"refreshSession"},{"text":"() ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"throws"}],"role":"symbol","defaultImplementations":1,"abstract":[{"type":"text","text":"Refreshes the user’s session using a refresh token."}],"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/refreshSession()-bd61","type":"topic","title":"refreshSession()","required":true},"doc://ATProtoKit/documentation/ATProtoKit/SessionConfiguration/deleteSession()-a8d":{"kind":"symbol","abstract":[{"text":"Deletes the user session.","type":"text"}],"required":true,"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"deleteSession"},{"text":"() ","kind":"text"},{"kind":"keyword","text":"async"},{"text":" ","kind":"text"},{"kind":"keyword","text":"throws"}],"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/deleteSession()-a8d","title":"deleteSession()","url":"\/documentation\/atprotokit\/sessionconfiguration\/deletesession()-a8d","role":"symbol","type":"topic","defaultImplementations":1},"atprotokit_icon.png":{"variants":[{"url":"\/images\/atprotokit_icon.png","traits":["1x","light"]}],"alt":"A technology icon representing the ATProtoKit framework.","type":"image","identifier":"atprotokit_icon.png"},"doc://ATProtoKit/documentation/ATProtoKit/AppleSecureKeychain":{"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"AppleSecureKeychain"}],"kind":"symbol","role":"symbol","title":"AppleSecureKeychain","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/AppleSecureKeychain","abstract":[{"type":"text","text":"Manages the keychains asociated with the sessions for the AT Protocol."}],"type":"topic","url":"\/documentation\/atprotokit\/applesecurekeychain","navigatorTitle":[{"text":"AppleSecureKeychain","kind":"identifier"}]},"doc://ATProtoKit/documentation/ATProtoKit/SessionConfiguration/getSession()-3wx11":{"abstract":[{"type":"text","text":"Fetches an existing session using an access token."}],"type":"topic","required":true,"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/getSession()-3wx11","role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"getSession","kind":"identifier"},{"text":"() ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"}],"url":"\/documentation\/atprotokit\/sessionconfiguration\/getsession()-3wx11","defaultImplementations":1,"kind":"symbol","title":"getSession()"},"doc://ATProtoKit/documentation/ATProtoKit/SessionConfiguration/authenticate(with:password:)-272a8":{"role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"authenticate","kind":"identifier"},{"text":"(","kind":"text"},{"text":"with","kind":"externalParam"},{"kind":"text","text":": "},{"text":"String","preciseIdentifier":"s:SS","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"password"},{"kind":"text","text":": "},{"text":"String","preciseIdentifier":"s:SS","kind":"typeIdentifier"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"}],"defaultImplementations":1,"url":"\/documentation\/atprotokit\/sessionconfiguration\/authenticate(with:password:)-272a8","type":"topic","required":true,"abstract":[{"text":"Attempts to authenticate with the PDS.","type":"text"}],"title":"authenticate(with:password:)","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/authenticate(with:password:)-272a8","kind":"symbol"},"doc://ATProtoKit/documentation/ATProtoKit/SecureKeychainProtocol":{"navigatorTitle":[{"text":"SecureKeychainProtocol","kind":"identifier"}],"kind":"symbol","abstract":[{"text":"A protocol for managing the keychain in an AT Protcol account.","type":"text"}],"type":"topic","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SecureKeychainProtocol","url":"\/documentation\/atprotokit\/securekeychainprotocol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SecureKeychainProtocol","kind":"identifier"}],"title":"SecureKeychainProtocol","role":"symbol"},"doc://ATProtoKit/documentation/ATProtoKit/ATProtocolConfiguration/init(pdsURL:keychainProtocol:configuration:canResolve:)":{"type":"topic","title":"init(pdsURL:keychainProtocol:configuration:canResolve:)","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATProtocolConfiguration\/init(pdsURL:keychainProtocol:configuration:canResolve:)","abstract":[],"url":"\/documentation\/atprotokit\/atprotocolconfiguration\/init(pdsurl:keychainprotocol:configuration:canresolve:)","role":"symbol","kind":"symbol","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"<"},{"text":"Keychain","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"pdsURL","kind":"externalParam"},{"kind":"text","text":": "},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"keychainProtocol"},{"kind":"text","text":": "},{"text":"Keychain","kind":"typeIdentifier"},{"kind":"text","text":", "},{"kind":"externalParam","text":"configuration"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"URLSessionConfiguration","preciseIdentifier":"c:objc(cs)NSURLSessionConfiguration"},{"text":", ","kind":"text"},{"text":"canResolve","kind":"externalParam"},{"kind":"text","text":": "},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"},{"text":")","kind":"text"}]},"doc://ATProtoKit/documentation/ATProtoKit/ATProtocolConfiguration":{"kind":"symbol","title":"ATProtocolConfiguration","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATProtocolConfiguration","url":"\/documentation\/atprotokit\/atprotocolconfiguration","role":"symbol","abstract":[{"type":"text","text":"Manages authentication and session operations for the a user account in the AT Protocol."}],"navigatorTitle":[{"text":"ATProtocolConfiguration","kind":"identifier"}],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ATProtocolConfiguration"}],"type":"topic"},"doc://ATProtoKit/documentation/ATProtoKit/ATProtoKitConfiguration":{"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/ATProtoKitConfiguration","navigatorTitle":[{"kind":"identifier","text":"ATProtoKitConfiguration"}],"role":"symbol","type":"topic","abstract":[{"type":"text","text":"Defines a protocol for configurations in the "},{"code":"ATProtoKit","type":"codeVoice"},{"text":" API library.","type":"text"}],"url":"\/documentation\/atprotokit\/atprotokitconfiguration","kind":"symbol","title":"ATProtoKitConfiguration","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ATProtoKitConfiguration","kind":"identifier"}]},"https://github.com/mattmassicotte/ATResolve":{"url":"https:\/\/github.com\/mattmassicotte\/ATResolve","identifier":"https:\/\/github.com\/mattmassicotte\/ATResolve","title":"ATResolve","titleInlineContent":[{"type":"text","text":"ATResolve"}],"type":"link"},"doc://ATProtoKit/documentation/ATProtoKit/UserSession":{"url":"\/documentation\/atprotokit\/usersession","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"UserSession"}],"title":"UserSession","abstract":[{"text":"Represents an authenticated user session within the AT Protocol.","type":"text"}],"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/UserSession","kind":"symbol","navigatorTitle":[{"text":"UserSession","kind":"identifier"}],"type":"topic","role":"symbol"},"doc://ATProtoKit/documentation/ATProtoKit/SessionConfiguration":{"url":"\/documentation\/atprotokit\/sessionconfiguration","fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"SessionConfiguration"}],"title":"SessionConfiguration","abstract":[{"type":"text","text":"Defines the requirements for session configurations within ATProtoKit."}],"identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"SessionConfiguration"}],"type":"topic","role":"symbol"},"doc://ATProtoKit/documentation/ATProtoKit/SessionConfiguration/createAccount(email:handle:existingDID:inviteCode:verificationCode:verificationPhone:password:recoveryKey:plcOperation:)-4i1g4":{"url":"\/documentation\/atprotokit\/sessionconfiguration\/createaccount(email:handle:existingdid:invitecode:verificationcode:verificationphone:password:recoverykey:plcoperation:)-4i1g4","kind":"symbol","type":"topic","role":"symbol","title":"createAccount(email:handle:existingDID:inviteCode:verificationCode:verificationPhone:password:recoveryKey:plcOperation:)","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/createAccount(email:handle:existingDID:inviteCode:verificationCode:verificationPhone:password:recoveryKey:plcOperation:)-4i1g4","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"createAccount","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"email"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"handle"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"existingDID","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"kind":"text","text":"?, "},{"text":"inviteCode","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":"?, ","kind":"text"},{"text":"verificationCode","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":"?, "},{"text":"verificationPhone","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"password"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"recoveryKey"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"kind":"text","text":"?, "},{"text":"plcOperation","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnknownType","preciseIdentifier":"s:10ATProtoKit11UnknownTypeO"},{"kind":"text","text":"?) "},{"text":"async","kind":"keyword"},{"kind":"text","text":" "},{"text":"throws","kind":"keyword"}],"abstract":[{"type":"text","text":"Creates an a new account for the user."}],"required":true,"defaultImplementations":1},"doc://ATProtoKit/documentation/ATProtoKit/SessionConfiguration/codeStream":{"kind":"symbol","title":"codeStream","abstract":[{"type":"text","text":"The async stream that receives user-provided authentication codes."}],"required":true,"url":"\/documentation\/atprotokit\/sessionconfiguration\/codestream","type":"topic","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/codeStream","role":"symbol","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"text":"codeStream","kind":"identifier"},{"text":": ","kind":"text"},{"text":"AsyncStream","kind":"typeIdentifier","preciseIdentifier":"s:ScS"},{"kind":"text","text":"<"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"kind":"text","text":">"}]},"doc://ATProtoKit/documentation/ATProtoKit":{"images":[{"identifier":"atprotokit_icon.png","type":"icon"}],"title":"ATProtoKit","abstract":[{"text":"Develop and manage client and server-side applications for the AT Protocol and Bluesky.","type":"text"}],"type":"topic","url":"\/documentation\/atprotokit","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit","role":"collection","kind":"symbol"},"doc://ATProtoKit/documentation/ATProtoKit/UserSessionRegistry":{"url":"\/documentation\/atprotokit\/usersessionregistry","role":"symbol","type":"topic","title":"UserSessionRegistry","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/UserSessionRegistry","abstract":[{"type":"text","text":"A registry that manages "},{"type":"codeVoice","code":"UserSession"},{"text":" instances, keyed by ","type":"text"},{"type":"codeVoice","code":"UUID"},{"type":"text","text":"."}],"fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"kind":"identifier","text":"UserSessionRegistry"}],"navigatorTitle":[{"kind":"identifier","text":"UserSessionRegistry"}],"kind":"symbol"},"doc://ATProtoKit/documentation/ATProtoKit/SessionConfiguration/codeContinuation":{"role":"symbol","url":"\/documentation\/atprotokit\/sessionconfiguration\/codecontinuation","identifier":"doc:\/\/ATProtoKit\/documentation\/ATProtoKit\/SessionConfiguration\/codeContinuation","abstract":[{"type":"text","text":"The continuation used to yield new user input into the "},{"code":"codeStream","type":"codeVoice"},{"text":".","type":"text"}],"type":"topic","required":true,"title":"codeContinuation","kind":"symbol","fragments":[{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"text":"codeContinuation","kind":"identifier"},{"text":": ","kind":"text"},{"text":"AsyncStream","kind":"typeIdentifier","preciseIdentifier":"s:ScS"},{"kind":"text","text":"<"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":">.","kind":"text"},{"preciseIdentifier":"s:ScS12ContinuationV","text":"Continuation","kind":"typeIdentifier"}]}}}